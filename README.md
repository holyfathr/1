# Содержание

1. [Стек](#стек)
2. [Структура](#структура)
3. [Стиль кода](#стиль-кода)
4. [Команды](#команды)

# Стек

Проект написан на JavaScript.

**Фреймворк:** Next.js (React)\
**Менеджер пакетов:** yarn\
**Формы:** react-hook-form и zod\
**Стили:** sass\
**Даты:** date-fns\
**Сетевые запросы:** react-query и axios\
**Тестирование:** Jest

# Структура

## `api`

В данной папке содержатся функции, реализующие взаимодействие с API бэкенда. Они разделены по файлам на основе сущности, с которой работают.

> **Пример:** функции в `api/entrant.js` отправляют запросы, связанные с аккаунтом поступающего.

Названия файлов — kebab-case.

## `components`

Названия файлов компонентов — CamelCase, стилей — kebab-case.

Каждому компоненту также добавляется файл `index.js` для удобного импортирования (без дублирования типа `components/ui/Component/Component`).

### `containers`

Здесь лежат компоненты, которые получают и преобразуют информацию перед тем, как передать UI-компонентам. Отделяют работу с бэкендом от интерфейса.

> **Пример:** компонент `ApplicationsTable` рисует таблицу заявок, а `ApplicationsTableContainer` запрашивает у бэкенда список заявок, строит таблицу и передаёт её в удобном формате компоненту `ApplicationsTable`.

Название формируется добавлением слова «Container» к названию UI-компонента, которому передаётся информация.

### `forms`

Здесь хранятся формы, причём логика отправки и получения начальных значений должна быть вынесена в соответствующий контейнер.

### `illustrations`

Здесь хранятся динамические иллюстрации (с параллакс-эффектом).

### `partials`

В данной папке находятся компоненты, которые являются частями страниц или бóльших компонентов.

### `proxies`

Компоненты-прокси предоставляют удобный способ взаимодействия с внешними библиотечными компонентами (например, задают пропсы по умолчанию).

> **Пример:** используется UI-библиотека календаря. Создаётся прокси-компонент, который устанавливает язык и формат ввода, чтобы не указывать эти значения при каждом использовании компонента.

### `ui`

UI-компоненты ответственны за отображение переданной им информации. По возможности не должны содержать логики. Получение информации для отображения является задачей компонента-контейнера.

## `helpers`

В данной папке содержится код, реализующий некоторой вспомогательный функционал: например, форматирование чисел. Рекомендуется написание тестов.

Названия файлов — kebab-case.

## `hocs`

Здесь лежат компоненты высшего порядка (HOCs).

Названия файлов — kebab-case.

## `hooks`

Здесь лежат хуки.

Названия файлов — kebab-case.

## `pages`

В данной папке находятся страницы сайта (роуты). Страница, образующая роут, должна иметь расширение `.page.js`.

Названия файлов страниц — kebab-case, подключаемых компонентов — CamelCase.

## `public`

В данной папке находятся файлы, к которым не применяются никакие трансформации.

> **Пример:** файл `public/image.jpg` после сборки будет доступен по адресу `<host>/image.jpg`

SVG-изображения требуется обрезать по границам контента, а также [оптимизировать](https://jakearchibald.github.io/svgomg/) (Prefer viewBox to width/height обязателен). Монохромные иконки должны иметь цвет `#000` для корректной работы фильтров.

Названия файлов — kebab-case.

## `styles`

В этой папке лежат глобальные стили и импортируемые Scss-модули.

Названия файлов — kebab-case.

## `validation`

Здесь находятся файлы с правилами (схемами) валидации форм.

Название файла — kebab-case от названия формы, которую он валидирует.

> **Пример:** форма `AccountForm` — валидатор `account-form`.

## `config.js`

В данном файле содержатся глобальные настройки проекта. Не путать с `.env.local`, в котором хранятся потенциально динамические значения или значения, зависящие от окружения (тест/прод).

# Стиль кода

## Импорты

В компонентах принят следующий порядок групп импортирования:

1. Библиотеки
2. Компоненты
3. Хуки
4. Функции из `helpers/`
5. Функции из `api/`
6. Схемы валидации
7. Стили

Группы разделяются пустой строкой.

# Команды

## Установка зависимостей

Перед началом работы с проектом необходимо установить все зависимости. Для этого воспользуйтесь следующей командой.

```sh
yarn
```

## Установка переменных окружения

Создайте файл с переменными окружения.

```sh
cp .env.local.example .env.local
```

Затем отредактируйте `.env.local` так, чтобы в нём содержались актуальные значения.

## Локальная разработка

```sh
yarn dev
```

## Тестирование

```sh
yarn test
```

## Сборка

```sh
yarn build
```

Чтобы собрать проект с анализом бандла добавьте `ANALYZE=true` перед командой сборки:

```sh
ANALYZE=true yarn build
```
